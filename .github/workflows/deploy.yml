name: Deploy vit app to vps 

on: 
    push:
        branches: 
            - main
            
jobs : 
    deploy: 
        runs-on: ubuntu-latest
    
        steps: 
            - name : checkout code 
              uses : actions/checkout@v4
            
            - name : Deploy via SSH 
              uses: appleboy/ssh-action@v1.0.3
              with: 
                host: ${{secrets.VPS_HOST}}
                username: ${{secrets.VPS_USER}}
                key: ${{secrets.VPS_SSH_KEY}}
                script: | 
                    cd /home/github-actions/vite_app 
                    git pull origin main 
                    docker compose down 
                    docker compose up -d --build


